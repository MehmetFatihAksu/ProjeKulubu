@model ProjeKulubu.Models.CustomerComments

@{
    ViewBag.Title = "MusteriYorumlari";
    Layout = "~/Views/AdminShared/_Layout.cshtml";
}

<script type="text/javascript">

    function DataSave() {
        //var formData = new FormData();
        //formData.append('file', $('input[type=file]')[0].files[0]);
        //var yol = formData;
        //if ($("#CustomerName").val() == null || $("#uploadFile").val() == null) {
        //    alert("Müşteri ismini yada yorum resmini eksiksiz giriniz...");
        //} else {
            var Model = {
                Name: $("#CustomerName").val()
            }
            var uploadFile = {
                CommentsPictureURL : $("#uploadFile").val()
            }
            $.ajax({

                type: "POST",
                url: "/Customer/AddCustomer/",
                data: Model,
                dataType: "JSON",
                traditional: true,
                success: function (response) {
                    alert("Müşteri Yorumu Başarıyla Eklendi");
                    window.location.href = '/Customer/CustomerIndex';
                    $.ajax({

                        type: "POST",
                        url: "/Customer/AddImage/",
                        data: uploadFile,
                        dataType: "JSON",
                        traditional: true,

                    });
                },
                error: function (response) {
                    alert("Belirli Bir Sebepten Dolayı Soru Eklenemedi");
                    console.log("Hata Oluştu");
                }
                 

            });

           
        }
    

</script>


<link rel="stylesheet" type="text/css" href="/Content/AdminContent/assets/bootstrap-fileupload/bootstrap-fileupload.css" />
<script src="~/Content/AdminContent/js/buttonActions.js"></script>

<div class="page-title">
    <div>
        <h1><i class="fa fa-bars"></i> Müşteri Yorumları Yönetimi</h1>
        <h4>Bu kısımda müşterileriniz ait yorumları ekleyip silebilir veya düzenleyebilirsiniz</h4>
    </div>
</div>

<div id="breadcrumbs">
    <ul class="breadcrumb">
        <li>
            <i class="fa fa-home"></i>
            <a href="@Url.Action("Index","Admin")">Ana Sayfa</a>
            <span class="divider"><i class="fa fa-angle-right"></i></span>
        </li>
        <li class="active">Müşteri Yorumları Yönetimi</li>
    </ul>
</div>

<div class="row">
    <div class="col-md-12">
        <div class="box box-black">
            <div class="box-title">
                <h3><i class="fa fa-comments"></i> Müşteri Yorumları Ekleme Formu</h3>
                <div class="box-tool">
                    <a data-action="collapse" href="#"><i class="fa fa-chevron-up"></i></a>
                    <a data-action="close" href="#"><i class="fa fa-times"></i></a>
                </div>
            </div>
            <div class="box-content">
                <form action="#" class="form-horizontal form-row-separated" enctype="multipart/form-data">
                    <div class="form-group">
                        <label for="textfield3" class="col-sm-3 col-lg-2 control-label">Müşteri İsmi</label>
                        <div class="col-sm-9 col-lg-10 controls">
                            <input type="text" name="CustomerName" id="CustomerName" placeholder="Müşteri İsmini Giriniz" class="form-control show-popover" data-trigger="hover" data-content="Bu kısıma müşterinizin adını giriniz..." data-original-title="Müşteri İsmi" data-placement="left">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-3 col-lg-2 control-label">Yorum Resmi:</label>
                        <div class="col-sm-9 col-lg-10 controls">
                            <div class="fileupload fileupload-new" data-provides="fileupload">
                                <div class="fileupload-new img-thumbnail" style="width: 200px; height: 150px;">
                                    <img src="http://www.placehold.it/200x150/EFEFEF/AAAAAA&amp;text=no+image" alt="" />
                                </div>
                                <div class="fileupload-preview fileupload-exists img-thumbnail" style="max-width: 200px; max-height: 150px; line-height: 20px;"></div>
                                <div>
                                    <span class="btn btn-default btn-file">
                                        <span class="fileupload-new">Resim Seç</span>
                                        <span class="fileupload-exists">Değiştir</span>

                                        <input type="file" multiple name="uploadFile" id="uploadFile" class="file-input" formenctype="multipart/form-data" />
                                    </span>
                                    <a href="#" class="btn btn-default fileupload-exists" data-dismiss="fileupload">Sil</a>
                                </div>
                            </div>

                        </div>

                    </div>
                    <div class="form-group last">
                        <div class="col-sm-9 col-sm-offset-3 col-lg-10 col-lg-offset-2">
                            <button type="submit" class="btn btn-primary" style="float:right" onclick="DataSave()"><i class="fa fa-check-circle"></i> Kaydet</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

@Html.Partial("CustomerList", "Customer");

<footer>
    <p>2016 © <a href="http://www.cizgitech.com">Cizgi-Tech</a> Yazılım Çözümleri</p>
</footer>

<a id="btn-scrollup" class="btn btn-circle btn-lg" href="#"><i class="fa fa-chevron-up"></i></a>
